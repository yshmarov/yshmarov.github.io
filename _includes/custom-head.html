<!-- Preconnect to external origins for faster loading -->
<link rel="preconnect" href="https://plausible.io" crossorigin>
<link rel="dns-prefetch" href="https://plausible.io">
{% if page.youtube_id %}
<link rel="preconnect" href="https://www.youtube.com" crossorigin>
<link rel="preconnect" href="https://i.ytimg.com" crossorigin>
{% endif %}
<link rel="dns-prefetch" href="https://giscus.app">

<!-- Analytics (deferred for performance) -->
<script
  defer
  data-domain="blog.superails.com"
  src="https://plausible.io/js/plausible.js"
></script>

<!-- Favicons -->
<link rel="shortcut icon" type="image/png" href="/favicon.png" />
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />

<!-- Web App Manifest -->
<link rel="manifest" href="/manifest.json" />

<!-- Twitter Card Meta Tags -->
<meta name="twitter:site" content="@yarotheslav" />
<meta name="twitter:creator" content="@yarotheslav" />
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="{{ page.title | default: site.title | escape }}" />
{% assign seo_description = page.description | default: page.excerpt | strip_html | truncate: 160 | default: site.description %}
<meta name="twitter:description" content="{{ seo_description | escape }}" />
{% if page.thumbnail %}
<meta name="twitter:image" content="{{ page.thumbnail | absolute_url }}" />
{% else %}
<meta name="twitter:image" content="{{ '/assets/static-pages/yaro-cindy.jpg' | absolute_url }}" />
{% endif %}

<!-- Additional Open Graph tags not covered by jekyll-seo-tag -->
{% if page.date %}
<meta property="article:published_time" content="{{ page.date | date_to_xmlschema }}" />
{% endif %}
{% if page.modified_date %}
<meta property="article:modified_time" content="{{ page.modified_date | date_to_xmlschema }}" />
{% endif %}
{% if page.tags.size > 0 %}
{% for tag in page.tags %}
<meta property="article:tag" content="{{ tag }}" />
{% endfor %}
{% endif %}
<meta property="article:author" content="Yaroslav Shmarov" />

<!-- JSON-LD Structured Data -->
{% if page.layout == 'home' or page.url == '/' %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "name": {{ site.title | jsonify }},
  "url": {{ site.url | jsonify }},
  "description": {{ site.description | jsonify }},
  "inLanguage": "en",
  "potentialAction": {
    "@type": "SearchAction",
    "target": {
      "@type": "EntryPoint",
      "urlTemplate": "{{ site.url }}/?q={search_term_string}"
    },
    "query-input": "required name=search_term_string"
  },
  "publisher": {
    "@type": "Person",
    "name": "Yaroslav Shmarov",
    "url": "{{ site.url }}/about/"
  }
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Blog",
  "name": {{ site.title | jsonify }},
  "url": {{ site.url | jsonify }},
  "description": {{ site.description | jsonify }},
  "inLanguage": "en",
  "blogPost": [
    {% for post in site.posts limit: 10 %}
    {
      "@type": "BlogPosting",
      "headline": {{ post.title | jsonify }},
      "url": "{{ post.url | absolute_url }}",
      "datePublished": "{{ post.date | date_to_xmlschema }}",
      "author": {
        "@type": "Person",
        "name": "Yaroslav Shmarov"
      }
    }{% unless forloop.last %},{% endunless %}
    {% endfor %}
  ]
}
</script>
{% endif %}

{% if page.layout == 'post' %}
{%- assign words = page.content | number_of_words -%}
{%- assign reading_time = words | divided_by: 200 -%}
{%- if reading_time == 0 -%}{%- assign reading_time = 1 -%}{%- endif -%}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "{{ page.url | absolute_url }}"
  },
  "headline": {{ page.title | jsonify }},
  "description": {{ seo_description | jsonify }},
  "datePublished": "{{ page.date | date_to_xmlschema }}",
  {% if page.modified_date %}
  "dateModified": "{{ page.modified_date | date_to_xmlschema }}",
  {% else %}
  "dateModified": "{{ page.date | date_to_xmlschema }}",
  {% endif %}
  "wordCount": {{ words }},
  "timeRequired": "PT{{ reading_time }}M",
  "inLanguage": "en",
  "author": {
    "@type": "Person",
    "name": "Yaroslav Shmarov",
    "url": "{{ site.url }}/about/"
  },
  "publisher": {
    "@type": "Person",
    "name": "Yaroslav Shmarov",
    "url": "{{ site.url }}/about/"
  },
  {% if page.thumbnail %}
  "image": "{{ page.thumbnail | absolute_url }}",
  {% else %}
  "image": "{{ '/assets/static-pages/yaro-cindy.jpg' | absolute_url }}",
  {% endif %}
  {% if page.tags.size > 0 %}
  "keywords": {{ page.tags | join: ', ' | jsonify }},
  {% endif %}
  "isPartOf": {
    "@type": "Blog",
    "name": {{ site.title | jsonify }},
    "url": {{ site.url | jsonify }}
  }
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position": 1,
      "name": "Home",
      "item": "{{ site.url }}/"
    },
    {
      "@type": "ListItem",
      "position": 2,
      "name": {{ page.title | jsonify }},
      "item": "{{ page.url | absolute_url }}"
    }
  ]
}
</script>
{% endif %}
